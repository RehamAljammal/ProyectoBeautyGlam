@model BeautyGlam.Abstracciones.ModelosParaUI.GuiaRegaloDto
@using BeautyGlam.Abstracciones.ModelosParaUI

@{
    ViewBag.Title = "Editar Guía de Regalo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="section-space sup-page">
    <div class="container sup-container">

        <div class="sup-header">
            <h2 class="sup-title">Editar Guía de Regalo</h2>
            <p class="sup-subtitle">Actualiza la información de la guía 🎁</p>
        </div>

        <div class="sup-card">
            <div class="sup-card-head">
                <span class="sup-badge">Edición</span>
            </div>

            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.idGuia)

        <div class="sup-form">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <div class="row">

                <div class="col-md-6 mb-3">
                    @Html.Label("Categoria", "Categoría", new { @class = "sup-label d-block" })
                    @Html.TextBoxFor(m => m.categoria,
                                 new { @class = "form-control sup-input", placeholder = "Ej: Skincare" })
                    @Html.ValidationMessageFor(m => m.categoria, "", new { @class = "text-danger" })
                </div>

                <div class="col-md-6 mb-3">
                    @Html.Label("Tipo", "Tipo", new { @class = "sup-label d-block" })
                    @Html.TextBoxFor(m => m.tipo,
                                 new { @class = "form-control sup-input", placeholder = "Ej: Regalo premium" })
                    @Html.ValidationMessageFor(m => m.tipo, "", new { @class = "text-danger" })
                </div>

                <div class="col-md-6 mb-3">
                    @Html.Label("Genero", "Género", new { @class = "sup-label d-block" })
                    @Html.DropDownListFor(m => m.genero,
                                 new SelectList(new[]
                                 {
                                    new { Value = "Femenino", Text = "Femenino" },
                                    new { Value = "Masculino", Text = "Masculino" },
                                    new { Value = "Unisex", Text = "Unisex" }
                              }, "Value", "Text", Model.genero),
                                 "Seleccione...",
                                 new { @class = "form-control sup-input" })
                    @Html.ValidationMessageFor(m => m.genero, "", new { @class = "text-danger" })
                </div>

                <div class="col-md-6 mb-3">
                    @Html.Label("Presupuesto", "Presupuesto", new { @class = "sup-label d-block" })
                    @Html.TextBoxFor(m => m.presupuesto,
                                 new { @class = "form-control sup-input", type = "number", step = "0.01" })
                    @Html.ValidationMessageFor(m => m.presupuesto, "", new { @class = "text-danger" })
                </div>


            </div>

            <h5 class="mt-4">Productos incluidos</h5>

            <div class="row">
                @foreach (ProductoSeleccionadoDto producto in Model.productosDisponibles)
                {
                    <div class="col-md-4 mb-3">
                        <label class="w-100">
                            <div class="card h-100 shadow-sm rounded-4 p-2 text-center"
                                 style="cursor:pointer;">

                                <img src="@(string.IsNullOrEmpty(producto.imagen)
                                ? Url.Content("~/Content/img/no-image.png")
                                : producto.imagen)"
                                     alt="@producto.nombre"
                                     class="img-fluid rounded-3 mb-2"
                                     style="height:140px; object-fit:cover;" />

                                <div class="form-check d-flex justify-content-center align-items-center gap-2">
                                    <input type="checkbox"
                                           name="productosSeleccionados"
                                           value="@producto.id"
                                           class="form-check-input"
                                           @(Model.productosSeleccionados.Contains(producto.id) ? "checked" : "") />

                                    <span class="fw-semibold">@producto.nombre</span>
                                </div>

                            </div>
                        </label>
                    </div>
                }
            </div>


            <div class="sup-actions mt-4">
                <button type="submit" class="sup-btn">
                    Guardar Cambios ✨
                </button>

                <a href="@Url.Action("Index")"
                   class="sup-btn sup-btn-soft">
                    Cancelar
                </a>
            </div>
        </div>
            }
        </div>
    </div>
</section>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}


